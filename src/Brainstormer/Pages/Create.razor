@page "/Create"
@using Brainstormer.Models.interfaces
@using Brainstormer.Models.models
@using System.Security.Cryptography.Xml

@inject IStateStorage _stateStorage

<MudPaper Width="MaxWidth" Min-Height="100%">
    <MudGrid Justify="Justify.SpaceBetween" Min-Height="100%">
        <MudItem xs="12">
            <MudText>Come up with some ideas!</MudText>
        </MudItem>
        <MudItem xs="12"> 
            <!-- ideas here-->
            <MudGrid>
                @foreach (var idea in _stateStorage.Ideas)
                {
                    <MudItem xs="3" @onclick="() => RemoveIdea(idea)">
                        <MudText Align="Align.Center" Typo="Typo.h6" Color="Color.Info">
                            @idea.Name
                        </MudText>
                    </MudItem>
                }
            </MudGrid>
        </MudItem>
        <MudItem xs="12">
            <MudGrid Justify="Justify.Center">
                <MudItem xs="4">
                    <MudTextField @bind-Value="_newIdea.Name" Label="Idea" Variant="Variant.Outlined" Placeholder="Your Idea"/>
                </MudItem>
                <MudItem xs="2">
                    <MudIconButton Icon="@Icons.Filled.CheckBox" @onclick="AddIdea"/>
                </MudItem>
            </MudGrid>
        </MudItem>
    </MudGrid>
</MudPaper>

@code {
    Idea _newIdea = new Idea();

    private void AddIdea()
    {
        _stateStorage.Ideas.Add(_newIdea);
        _newIdea = new Idea();
    }

    private void RemoveIdea(Idea idea) => _stateStorage.Ideas.Remove(idea);
}